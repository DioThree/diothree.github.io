<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pencatatan Stok Barang</title>
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f4f7f6;
            margin: 0;
            padding: 20px;
            color: #333;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            overflow: hidden;
        }
        header {
            background-color: #007bff;
            color: white;
            padding: 20px;
            text-align: center;
        }
        h1 {
            margin: 0;
            font-size: 1.8em;
        }
        main {
            padding: 25px;
        }
        .input-grup {
            margin-bottom: 20px;
        }
        .input-grup label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }
        .input-grup select,
        .input-grup input[type="number"] {
            width: 100%;
            padding: 10px;
            font-size: 1em;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box; 
        }
        .tombol {
            display: inline-block;
            background-color: #007bff;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            width: 100%;
            text-align: center;
            margin-top: 10px;
        }
        .tombol:hover {
            background-color: #0056b3;
        }
        .tombol-laporan {
            background-color: #28a745; 
        }
        .tombol-laporan:hover {
            background-color: #1e7e34;
        }
        #area-laporan {
            margin-top: 20px;
            background-color: #f9f9f9;
            border: 1px dashed #ddd;
            border-radius: 5px;
            padding: 20px;
            min-height: 100px;
            white-space: pre-wrap; 
            font-family: "Courier New", Courier, monospace;
        }
        #status-update {
            text-align: center;
            padding: 10px;
            margin-top: 15px;
            border-radius: 5px;
            font-weight: 500;
        }
        .status-sukses {
            background-color: #e6ffed;
            color: #228b22;
        }
        .status-error {
            background-color: #ffebee;
            color: #c62828;
        }
    </style>
</head>
<body>

    <div class="container">
        <header>
            <h1>ðŸ“ˆ Pencatatan Stok Barang</h1>
        </header>
        
        <main>
            <div class="input-grup">
                <label for="pilih-barang">Pilih Barang:</label>
                <select id="pilih-barang">
                    <option value="">-- Pilih salah satu --</option>
                </select>
            </div>
            
            <div class="input-grup">
                <label for="jumlah-kg">Jumlah (Kg):</label>
                <input type="number" id="jumlah-kg" placeholder="Contoh: 10.5" step="0.1">
            </div>
            
            <button id="tombol-update" class="tombol">Update Stok</button>
            
            <div id="status-update" style="display: none;"></div> 

            <hr style="border: 0; border-top: 1px solid #eee; margin: 25px 0;">

            <button id="tombol-laporan" class="tombol tombol-laporan">Tampilkan Laporan Stok</button>
            
            <div id="area-laporan">
                Laporan stok (hanya barang > 0 Kg) akan muncul di sini...
            </div>
            
        </main>
    </div>

    <script>
        // --- 1. Definisi Data ---
        
        // ================= PERUBAHAN DI SINI =================
        // Mengganti 'daftarKodeMentah' dengan array nama barang yang jelas.
        // Saya juga memperbaiki beberapa ejaan kecil (misal: BawangbPutih, Seledei).
        
        const daftarNamaBarang = [
            "Bawang Merah",
            "Bawang Putih",
            "Bombay",
            "Bawang Sumenep",
            "Jengkol",
            "Jengkol Cangkang",
            "Wortel Dus",
            "Wortel AB",
            "Wortel PL",
            "Kentang AB",
            "Kentang PL",
            "Kentang AL",
            "Kentang ABC",
            "Cengek ORI",
            "Cengek Japlak",
            "Keriting Merah",
            "Keriting Hijau",
            "Genot",
            "Cabe Hijau",
            "Cabe Merah",
            "Daun Salam",
            "Sereh",
            "Daun Jeruk",
            "Laja",
            "Jahe",
            "Cikur",
            "Kunyit",
            "Lemon Kalifornia",
            "Lemon Biasa",
            "Jeruk Nipis",
            "Jeruk Purut",
            "Kol",
            "Seladah Bokor",
            "Tomat Merah",
            "Tomat Hijau",
            "Bonteng",
            "Bawang Daun",
            "Seledri",
            "Jagong",
            "Pecay",
            "Burkol",
            "Burkoli",
            "Pakcoy",
            "Lobak Kecil",
            "Lobak Daun",
            "Waluh Baby",
            "Waluh Daun",
            "Paria",
            "Lember",
            "Lenca",
            "Kacang Panjang",
            "Buncis",
            "Terong Ungu",
            "Terong Coel",
            "Oyong"
        ];
        
        // ================= AKHIR PERUBAHAN =================

        // Objek (seperti Dictionary Python) untuk menyimpan stok
        let stokBarangKg = {};

        // --- 2. Referensi Elemen HTML ---
        // (Tidak ada perubahan di bagian ini)
        const dropdownBarang = document.getElementById('pilih-barang');
        const inputKg = document.getElementById('jumlah-kg');
        const tombolUpdate = document.getElementById('tombol-update');
        const tombolLaporan = document.getElementById('tombol-laporan');
        const areaLaporan = document.getElementById('area-laporan');
        const statusBar = document.getElementById('status-update');

        // --- 3. Fungsi Inisialisasi (Dijalankan saat halaman dimuat) ---
        
        document.addEventListener('DOMContentLoaded', () => {
            
            // ================= PERUBAHAN DI SINI =================
            // Kita tidak perlu lagi memproses teks mentah.
            // Kita langsung urutkan dan gunakan array 'daftarNamaBarang'.
            
            daftarNamaBarang.sort(); // Mengurutkan daftar nama barang berdasarkan abjad

            // Mengisi objek stok DAN dropdown
            daftarNamaBarang.forEach(namaBarang => {
                
                // Pastikan namaBarang tidak kosong (jika ada string kosong di array)
                if (namaBarang) { 
                    // 1. Masukkan ke objek stok dengan nilai awal 0
                    stokBarangKg[namaBarang] = 0;
                    
                    // 2. Buat elemen <option> baru untuk dropdown
                    const opsi = document.createElement('option');
                    opsi.value = namaBarang;   // Nilai (cth: "Bawang Merah")
                    opsi.textContent = namaBarang; // Teks (cth: "Bawang Merah")
                    
                    // 3. Tambahkan ke dropdown
                    dropdownBarang.appendChild(opsi);
                }
            });
            // ================= AKHIR PERUBAHAN =================
            
            console.log("Sistem Stok Siap. Objek stok:", stokBarangKg);
        });

        // --- 4. Fungsi-Fungsi Logika ---
        // (Tidak ada perubahan di dalam fungsi-fungsi ini, 
        // karena logikanya sudah bekerja dengan 'key' apa pun)

        function updateStok() {
            const kodeTerpilih = dropdownBarang.value;
            const jumlahKg = parseFloat(inputKg.value);

            if (kodeTerpilih === "") {
                tampilkanStatus("Pilih barang terlebih dahulu.", "error");
                return; 
            }
            if (isNaN(jumlahKg) || jumlahKg < 0) {
                tampilkanStatus("Masukkan jumlah Kg yang valid (angka positif).", "error");
                return; 
            }

            stokBarangKg[kodeTerpilih] = jumlahKg;
            tampilkanStatus(`âœ… STOK DIPERBARUI: [${kodeTerpilih}] sekarang ${jumlahKg} Kg.`, "sukses");

            inputKg.value = "";
            dropdownBarang.value = ""; 
        }

        function tampilkanLaporan() {
            let laporanHTML = "--- LAPORAN STOK GUDANG (Kg) ---\n\n";
            let totalItem = 0;
            let totalKg = 0;
            let adaStok = false;

            // Mengambil kunci (nama barang) dari objek stok dan mengurutkannya
            const namaTersortir = Object.keys(stokBarangKg).sort();

            // Loop semua nama yang sudah diurutkan
            namaTersortir.forEach(nama => {
                const jumlah = stokBarangKg[nama];
                
                if (jumlah > 0) {
                    laporanHTML += `[${nama}]: ${jumlah} Kg\n`;
                    totalItem += 1;
                    totalKg += jumlah;
                    adaStok = true;
                }
            });

            if (!adaStok) {
                laporanHTML += "Belum ada barang yang memiliki stok (semua masih 0 Kg).";
            } else {
                laporanHTML += "\n-----------------------------------\n";
                laporanHTML += `Total Jenis Item (ada stok): ${totalItem}\n`;
                laporanHTML += `Total Berat Stok (Keseluruhan): ${totalKg.toFixed(2)} Kg`;
            }
            areaLaporan.textContent = laporanHTML;
        }

        function tampilkanStatus(pesan, tipe) {
            statusBar.textContent = pesan;
            statusBar.className = (tipe === "sukses") ? "status-sukses" : "status-error";
            statusBar.style.display = "block"; 

            setTimeout(() => {
                statusBar.style.display = "none";
            }, 3000);
        }

        // --- 5. Menghubungkan Tombol ke Fungsi ---
        // (Tidak ada perubahan di bagian ini)
        
        tombolUpdate.addEventListener('click', updateStok);
        tombolLaporan.addEventListener('click', tampilkanLaporan);
        
    </script>

</body>
</html>
